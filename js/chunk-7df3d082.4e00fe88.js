(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7df3d082"],{"165c":function(t,e,a){var r=a("353b");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=a("499e").default;i("f0c844ce",r,!0,{sourceMap:!1,shadowMode:!1})},"353b":function(t,e,a){var r=a("24fb");e=r(!1),e.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap);"]),e.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&display=swap);"]),e.push([t.i,"body[data-v-1de64a16]{margin:0;padding:0;font-family:Noto Sans TC,sans-serif}*[data-v-1de64a16]{box-sizing:border-box}h1[data-v-1de64a16],h2[data-v-1de64a16],h3[data-v-1de64a16],h4[data-v-1de64a16],h5[data-v-1de64a16],h6[data-v-1de64a16],p[data-v-1de64a16]{margin:0;padding:0}h1[data-v-1de64a16],h2[data-v-1de64a16]{font-weight:700}h3[data-v-1de64a16],h4[data-v-1de64a16],h5[data-v-1de64a16]{font-weight:medium}h1[data-v-1de64a16]{font-size:68px}h2[data-v-1de64a16]{font-size:42px}h3[data-v-1de64a16]{font-size:28px}h4[data-v-1de64a16]{font-size:24px}h5[data-v-1de64a16]{font-size:18px}li[data-v-1de64a16],ol[data-v-1de64a16],ul[data-v-1de64a16]{list-style:none;margin:0;padding:0}a[data-v-1de64a16],a[data-v-1de64a16]:focus,a[data-v-1de64a16]:hover{text-decoration:none}img[data-v-1de64a16]{width:100%;height:100%;display:block}.btn[data-v-1de64a16],a[data-v-1de64a16]:focus,button[data-v-1de64a16],button[data-v-1de64a16]:focus,input[data-v-1de64a16]:focus,select[data-v-1de64a16],select[data-v-1de64a16]:focus,textarea[data-v-1de64a16]:focus{outline:0!important}button[data-v-1de64a16]{background-color:transparent;border:0;cursor:pointer}button[disabled][data-v-1de64a16]{pointer-events:none}input[data-v-1de64a16]{padding:0}input[data-v-1de64a16]:invalid,input[data-v-1de64a16]:required{box-shadow:none}.d-none[data-v-1de64a16]{display:none}.setting-wrapper[data-v-1de64a16]{width:100%;margin:0 auto}.setting-wrapper .setting-form-area[data-v-1de64a16]{position:relative;padding-right:24px;padding-left:24px;padding-top:24px;width:100%;border-right:1px solid #e6ecf0;border-left:1px solid #e6ecf0}.setting-wrapper .setting-form-area h4[data-v-1de64a16]{color:#171725;font-weight:700;margin-bottom:24px}.setting-wrapper .setting-form-area hr[data-v-1de64a16]{width:100%;position:absolute;color:#e6ecf0;top:62px;left:0}.setting-wrapper .setting-form-area .setting-form-container[data-v-1de64a16]{display:flex;justify-content:center;height:754px}.setting-wrapper .setting-form-area .setting-form-container .form-container[data-v-1de64a16]{padding-top:24px;width:593px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field[data-v-1de64a16]{position:relative;width:100%;height:54px;padding:2px 0 4px 0;margin-bottom:32px;background-color:#f5f8fa;border-radius:2px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field.check-password-field[data-v-1de64a16]{margin-bottom:0}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field .alert-msg[data-v-1de64a16]{position:absolute;top:54px;left:0;width:100%;margin:4px 0 0 0}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field .alert-msg span[data-v-1de64a16]{font-size:12px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field .alert-msg span.msg[data-v-1de64a16]{position:absolute;left:0;color:#fc5a5a}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field .alert-msg span.letter-count[data-v-1de64a16]{position:absolute;right:0;color:#696974}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field>label[data-v-1de64a16]{display:block;width:100%;height:22px;font-size:14px;color:#696974;margin-bottom:0;margin-left:10px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-1de64a16]{width:100%;height:26px;border-color:transparent;background-color:transparent;border-bottom:2px solid #657786;padding-bottom:10px;padding-left:9px}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-1de64a16]:disabled{border-color:transparent;background-color:transparent}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-1de64a16]:focus,.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-1de64a16]:hover{border-bottom:2px solid #50b5ff}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input.error[data-v-1de64a16]{border-bottom:2px solid #fc5a5a}.setting-wrapper .setting-form-area .setting-form-container .form-container .form-field input[data-v-1de64a16]::-webkit-input-placeholder{color:#b5b5be;font-size:16px}.setting-wrapper .setting-form-area .btn-container[data-v-1de64a16]{display:flex;justify-content:flex-end;margin-top:40px}.setting-wrapper .setting-form-area .btn-container .processing-btn[data-v-1de64a16]{background-color:#b5b5be;width:120px;height:46px;border-radius:50px;padding:8px 24px;font-size:20px;color:#fff}.setting-wrapper .setting-form-area .btn-container .save-btn[data-v-1de64a16]{position:absolute;top:529px;width:88px;height:46px;border-radius:50px;background-color:#f60;padding:8px 24px;font-size:20px;color:#fff}.setting-wrapper .setting-form-area .btn-container .save-btn[data-v-1de64a16]:disabled{background-color:#b5b5be}.setting-wrapper .setting-form-area .btn-container .logout-btn[data-v-1de64a16]{position:absolute;top:585px;width:88px}.setting-wrapper .setting-form-area .btn-container .logout-btn[data-v-1de64a16]:hover{color:#0062ff;text-decoration:underline}@media screen and (min-width:575px){.setting-wrapper[data-v-1de64a16]{height:914px}.setting-wrapper .mobile-navbar[data-v-1de64a16],.setting-wrapper .setting-form-area .btn-container .logout-btn[data-v-1de64a16]{display:none}}",""]),t.exports=e},"4ef5":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row setting-wrapper"},[e("Navbar",{staticClass:"pl-0",class:{"col-2":t.fullWidth>574,"d-none":t.fullWidth<=574}}),e("div",{staticClass:"setting-form-area",class:{"col-7":t.fullWidth>574}},[e("h4",[t._v("帳戶設定")]),e("hr"),e("form",{attrs:{action:"submit"},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"setting-form-container"},[e("div",{staticClass:"form-container"},[e("div",{staticClass:"form-field account-field"},[e("label",{attrs:{for:"account"}},[t._v("帳號")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{id:"account",name:"account",type:"text",placeholder:"請輸入帳號",required:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}}),"The account is registered."===t.errorMsg?e("div",{staticClass:"alert-msg"},[e("span",{staticClass:"msg"},[t._v("account已重複註冊！")])]):t._e()]),e("div",{staticClass:"form-field name-field"},[e("label",{attrs:{for:"name"}},[t._v("名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],class:{error:t.name.length>50},attrs:{id:"name",name:"name",type:"text",placeholder:"請輸入使用者名稱",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),e("div",{staticClass:"alert-msg"},[t.name.length>50?e("span",{staticClass:"msg"},[t._v("字數超過上限！")]):t._e(),e("span",{staticClass:"letter-count"},[t._v(t._s(t.name.length)+"/50")])])]),e("div",{staticClass:"form-field email-field"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",name:"email",type:"email",placeholder:"請輸入Email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),"The email is registered."===t.errorMsg?e("div",{staticClass:"alert-msg"},[e("span",{staticClass:"msg"},[t._v("Email已重複註冊！")])]):t._e(),"Invalid email address."===t.errorMsg?e("div",{staticClass:"alert-msg"},[e("span",{staticClass:"msg"},[t._v("Email格式錯誤")])]):t._e()]),e("div",{staticClass:"form-field password-field"},[e("label",{attrs:{for:"password"}},[t._v("密碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",name:"password",type:"password",placeholder:"請設定密碼",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("div",{staticClass:"form-field check-password-field"},[e("label",{attrs:{for:"check-password"}},[t._v("密碼確認")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],attrs:{id:"check-password",name:"checkPassword",type:"password",placeholder:"請再次輸入密碼",required:""},domProps:{value:t.checkPassword},on:{input:function(e){e.target.composing||(t.checkPassword=e.target.value)}}})])])]),e("div",{staticClass:"btn-container"},[t.isProcessing?e("button",{staticClass:"processing-btn",attrs:{disabled:""}},[t._v(" 處理中 ")]):e("button",{staticClass:"save-btn",attrs:{type:"submit",disabled:t.name.length>50}},[t._v(" 儲存 ")]),e("button",{staticClass:"logout-btn",on:{click:t.logout}},[t._v("登出")])])])]),e("div",{staticClass:"right",class:{"col-3":t.fullWidth>574,"d-none":t.fullWidth<=574}}),e("CreateTweetModal"),e("MobileNavbar",{staticClass:"mobile-navbar"})],1)},i=[],s=(a("d9e2"),a("d178")),o=a("6ea3"),n=a("5539"),d=a("2fa3"),l=a("2f62"),c=a("4cce"),p={name:"Setting",components:{Navbar:s["a"],CreateTweetModal:n["a"],MobileNavbar:o["a"]},computed:{...Object(l["b"])(["currentUser"])},data(){return{role:"",id:-1,account:"",name:"",email:"",password:"",checkPassword:"",isProcessing:!1,errorMsg:"",fullWidth:0}},created(){if(-1===this.currentUser.id)return;const{id:t}=this.$route.params;this.fetchUserProfile(t)},mounted(){this.fullWidth=window.innerWidth,window.onresize=()=>{this.fullWidth=window.innerWidth}},destroyed(){window.onresize=null},watch:{currentUser(t){this.currentUser={...this.currentUser,...t},this.id=this.currentUser.id,this.account=this.currentUser.account,this.name=this.currentUser.name,this.email=this.currentUser.email}},beforeRouteUpdate(t,e,a){if(-1===this.currentUser.id)return;const{id:r}=t.params;this.fetchUserProfile(r),a()},methods:{fetchUserProfile(t){this.id=this.currentUser.id,this.account=this.currentUser.account,this.name=this.currentUser.name,this.email=this.currentUser.email,this.id!==Number(t)&&this.$router.push("not-found")},async handleSubmit(t){try{if(this.errorMsg="",!(this.account.trim()&&this.email.trim()&&this.name.trim()&&this.password.trim()&&this.checkPassword.trim()))return void d["a"].fire({icon:"warning",title:"請輸入所有欄位，如不更新密碼，請輸入舊密碼"});if(this.password!==this.checkPassword)return this.password="",this.checkPassword="",void d["a"].fire({icon:"warning",title:"兩次密碼輸入不同"});if(this.name.length>50)return void d["a"].fire({icon:"warning",title:"暱稱不可超過50字"});this.isProcessing=!0;const e=t.target,a=new FormData(e),r=await c["a"].update({userId:this.id,formData:a}),{data:i}=r;if("OK"!==r.statusText)throw new Error(i.message);d["a"].fire({icon:"success",title:"更新帳戶資料成功"}),this.password="",this.checkPassword="",this.isProcessing=!1}catch(e){this.isProcessing=!1,console.error(e.message),"The email is registered."===e.message?(this.errorMsg=e.message,d["a"].fire({icon:"error",title:"Email已重複註冊！"})):"The account is registered."===e.message?(this.errorMsg=e.message,d["a"].fire({icon:"error",title:"account已重複註冊！"})):"Name is too long."===e.message?(this.errorMsg=e.message,d["a"].fire({icon:"error",title:"暱稱不可超過50字"})):"Password and checkPassword are not same."===e.message?(this.errorMsg=e.message,d["a"].fire({icon:"error",title:"兩次密碼輸入不相符"})):"Invalid email address."===e.message?(this.errorMsg=e.message,d["a"].fire({icon:"error",title:"Email格式錯誤，請填入有效的Email地址"})):(this.errorMsg=e.message,d["a"].fire({icon:"error",title:"資料更新失敗"}))}},logout(){this.role=this.currentUser.role,this.$store.commit("revokeAuthentication"),"user"===this.role?this.$router.push("/login"):this.$router.push("/admin/login")}}},m=p,f=(a("5a79"),a("2877")),g=Object(f["a"])(m,r,i,!1,null,"1de64a16",null);e["default"]=g.exports},"5a79":function(t,e,a){"use strict";a("165c")}}]);
//# sourceMappingURL=chunk-7df3d082.4e00fe88.js.map