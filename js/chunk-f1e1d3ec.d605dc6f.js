(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1e1d3ec"],{"3c4e":function(t,e,a){var s=a("24fb");e=s(!1),e.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap);"]),e.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&display=swap);"]),e.push([t.i,"body[data-v-aeb3a17e]{margin:0;padding:0;font-family:Noto Sans TC,sans-serif}*[data-v-aeb3a17e]{box-sizing:border-box}h1[data-v-aeb3a17e],h2[data-v-aeb3a17e],h3[data-v-aeb3a17e],h4[data-v-aeb3a17e],h5[data-v-aeb3a17e],h6[data-v-aeb3a17e],p[data-v-aeb3a17e]{margin:0;padding:0}h1[data-v-aeb3a17e],h2[data-v-aeb3a17e]{font-weight:700}h3[data-v-aeb3a17e],h4[data-v-aeb3a17e],h5[data-v-aeb3a17e]{font-weight:medium}h1[data-v-aeb3a17e]{font-size:68px}h2[data-v-aeb3a17e]{font-size:42px}h3[data-v-aeb3a17e]{font-size:28px}h4[data-v-aeb3a17e]{font-size:24px}h5[data-v-aeb3a17e]{font-size:18px}li[data-v-aeb3a17e],ol[data-v-aeb3a17e],ul[data-v-aeb3a17e]{list-style:none;margin:0;padding:0}a[data-v-aeb3a17e],a[data-v-aeb3a17e]:focus,a[data-v-aeb3a17e]:hover{text-decoration:none}img[data-v-aeb3a17e]{width:100%;height:100%;display:block}.btn[data-v-aeb3a17e],a[data-v-aeb3a17e]:focus,button[data-v-aeb3a17e],button[data-v-aeb3a17e]:focus,input[data-v-aeb3a17e]:focus,select[data-v-aeb3a17e],select[data-v-aeb3a17e]:focus,textarea[data-v-aeb3a17e]:focus{outline:0!important}button[data-v-aeb3a17e]{background-color:transparent;border:0;cursor:pointer}button[disabled][data-v-aeb3a17e]{pointer-events:none}input[data-v-aeb3a17e]{padding:0}input[data-v-aeb3a17e]:invalid,input[data-v-aeb3a17e]:required{box-shadow:none}.d-none[data-v-aeb3a17e]{display:none}.scrollbar[data-v-aeb3a17e]::-webkit-scrollbar{width:1px}.admin-tweets-wrapper[data-v-aeb3a17e]{overflow-y:scroll;max-height:914px}.admin-tweets-wrapper .admin-nav-wrapper[data-v-aeb3a17e]{display:flex;justify-content:space-around;align-items:center;position:sticky;top:0;width:100%;height:52px;background:#fff;z-index:1}.admin-tweets-wrapper .admin-nav-wrapper img[data-v-aeb3a17e]{width:24px;height:24px}.admin-tweets-wrapper .admin-nav-wrapper .logout-btn[data-v-aeb3a17e]:hover{color:#0062ff;text-decoration:underline}.admin-tweets-wrapper .spinner[data-v-aeb3a17e]{width:100%}@media screen and (min-width:575px){.admin-tweets-wrapper .admin-nav-wrapper[data-v-aeb3a17e]{display:none}}",""]),t.exports=e},"5a0c":function(t,e,a){"use strict";a("ae82")},"85c9":function(t,e,a){"use strict";a("e819")},ae82:function(t,e,a){var s=a("b7f4");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("51506889",s,!0,{sourceMap:!1,shadowMode:!1})},b7f4:function(t,e,a){var s=a("24fb");e=s(!1),e.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap);"]),e.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&display=swap);"]),e.push([t.i,"body[data-v-d2fbb25c]{margin:0;padding:0;font-family:Noto Sans TC,sans-serif}*[data-v-d2fbb25c]{box-sizing:border-box}h1[data-v-d2fbb25c],h2[data-v-d2fbb25c],h3[data-v-d2fbb25c],h4[data-v-d2fbb25c],h5[data-v-d2fbb25c],h6[data-v-d2fbb25c],p[data-v-d2fbb25c]{margin:0;padding:0}h1[data-v-d2fbb25c],h2[data-v-d2fbb25c]{font-weight:700}h3[data-v-d2fbb25c],h4[data-v-d2fbb25c],h5[data-v-d2fbb25c]{font-weight:medium}h1[data-v-d2fbb25c]{font-size:68px}h2[data-v-d2fbb25c]{font-size:42px}h3[data-v-d2fbb25c]{font-size:28px}h4[data-v-d2fbb25c]{font-size:24px}h5[data-v-d2fbb25c]{font-size:18px}li[data-v-d2fbb25c],ol[data-v-d2fbb25c],ul[data-v-d2fbb25c]{list-style:none;margin:0;padding:0}a[data-v-d2fbb25c],a[data-v-d2fbb25c]:focus,a[data-v-d2fbb25c]:hover{text-decoration:none}img[data-v-d2fbb25c]{width:100%;height:100%;display:block}.btn[data-v-d2fbb25c],a[data-v-d2fbb25c]:focus,button[data-v-d2fbb25c],button[data-v-d2fbb25c]:focus,input[data-v-d2fbb25c]:focus,select[data-v-d2fbb25c],select[data-v-d2fbb25c]:focus,textarea[data-v-d2fbb25c]:focus{outline:0!important}button[data-v-d2fbb25c]{background-color:transparent;border:0;cursor:pointer}button[disabled][data-v-d2fbb25c]{pointer-events:none}input[data-v-d2fbb25c]{padding:0}input[data-v-d2fbb25c]:invalid,input[data-v-d2fbb25c]:required{box-shadow:none}.d-none[data-v-d2fbb25c]{display:none}.tweets-list[data-v-d2fbb25c]{width:100%;border-right:1px solid #e6ecf0;border-left:1px solid #e6ecf0;padding:0}.tweets-list .title[data-v-d2fbb25c]{font-size:24px;font-weight:700;color:#171725;padding-top:24px;padding-bottom:24px;padding-left:20px}.tweets-list .tweets[data-v-d2fbb25c]{display:flex;flex-direction:column;justify-content:center;border-top:1px solid #e6ecf0}.tweets-list .tweets .tweet[data-v-d2fbb25c]{display:flex;padding:16px 23px;position:relative;border-bottom:1px solid #e6ecf0}.tweets-list .tweets .tweet[data-v-d2fbb25c]:hover{background-color:#f1f1f5}.tweets-list .tweets .tweet .avatar[data-v-d2fbb25c]{height:50px;width:50px;border-radius:50%;margin-right:8px}.tweets-list .tweets .tweet .tweet-info[data-v-d2fbb25c]{display:flex;flex-direction:column}.tweets-list .tweets .tweet .tweet-info .tweet-detail>span[data-v-d2fbb25c]{font-size:16px;font-weight:700;color:#171725;margin-right:8px}.tweets-list .tweets .tweet .tweet-info .tweet-detail .account-created-time[data-v-d2fbb25c]{font-size:14px;font-weight:400;color:#6c757d}.tweets-list .tweets .tweet .tweet-info .tweet-text[data-v-d2fbb25c]{margin-right:0;margin-top:8px;padding-right:50px;color:#171725;font-size:16px;font-weight:400;overflow-wrap:anywhere}.tweets-list .tweets .tweet .delete-btn[data-v-d2fbb25c]{position:absolute;right:5%;top:30%;margin:5px;height:16px;width:16px}",""]),t.exports=e},be6c:function(t,e,a){"use strict";var s=a("2fa3");e["a"]={tweets:{get(){return s["b"].get("/tweets")},delete({tweetId:t}){return s["b"].delete("/admin/tweets/"+t)}},users:{get(){return s["b"].get("/admin/users")}}}},e819:function(t,e,a){var s=a("3c4e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("662ca296",s,!0,{sourceMap:!1,shadowMode:!1})},fa6a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{ref:"infinite_list",staticClass:"admin-tweets-wrapper row scrollbar",attrs:{id:"infinite-list"}},[e("div",{staticClass:"admin-nav-wrapper"},[e("router-link",{staticClass:"nav",attrs:{to:"/admin/tweets"}},["admin-tweets"===t.$route.name?e("img",{staticClass:"home-icon",attrs:{src:a("4f7a"),alt:"home-icon"}}):e("img",{staticClass:"home-icon",attrs:{src:a("70ad"),alt:"home-icon"}})]),e("router-link",{staticClass:"nav",attrs:{to:"/admin/users"}},["admin-users"===t.$route.name?e("img",{staticClass:"user-icon",attrs:{src:a("8727"),alt:"user-icon"}}):e("img",{staticClass:"user-icon",attrs:{src:a("6e6d"),alt:"user-icon"}})]),e("button",{staticClass:"logout-btn",on:{click:t.logout}},[t._v("登出")])],1),e("Navbar",{staticClass:"nav pl-0",class:{"col-2":t.fullWidth>574,"d-none":t.fullWidth<=574}}),t.isLoading?e("Spinner",{staticClass:"spinner",class:{"col-10":t.fullWidth>574}}):e("AdminTweetsList",{staticClass:"admin-tweets-list",class:{"col-10":t.fullWidth>574},attrs:{"initial-tweets":t.showTenTweets},on:{"after-delete-tweet":t.afterTweetDelete}})],1)},i=[],d=(a("d9e2"),a("d178")),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tweets-list"},[e("h4",{staticClass:"title"},[t._v("推文清單")]),e("div",{staticClass:"tweets"},t._l(t.initialTweets,(function(a){return e("div",{key:a.id,staticClass:"tweet"},[e("img",{staticClass:"avatar",attrs:{src:t._f("emptyImage")(a.User.avatar),alt:"avatar"}}),e("div",{staticClass:"tweet-info"},[e("div",{staticClass:"tweet-detail"},[e("span",{staticClass:"user-name"},[t._v(t._s(a.User.name))]),e("span",{staticClass:"account-created-time"},[t._v("@"+t._s(a.User.account)+"·"+t._s(t._f("fromNow")(a.createdAt)))])]),e("p",{staticClass:"tweet-text"},[t._v(" "+t._s(t._f("onlyDisplay50Letters")(a.description))+" ")])]),e("button",{staticClass:"delete-btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleDeleteBtnClick(a.id)}}},[t._v(" ✕ ")])])})),0)])},o=[],r=a("2708"),c=a("2fa3"),l=a("be6c"),b={name:"AdminTweetsList",mixins:[r["c"],r["a"]],props:{initialTweets:{type:Array,required:!0}},methods:{async handleDeleteBtnClick(t){try{const{data:e}=await l["a"].tweets.delete({tweetId:t});if("error"===e.status)throw new Error(e.message);this.$emit("after-delete-tweet",t),c["a"].fire({icon:"success",title:"推文刪除成功"})}catch(e){console.error(e.message),c["a"].fire({icon:"error",title:"無法刪除此推文，請稍後再試"})}}},filters:{onlyDisplay50Letters(t){return t.length>50?t.slice(0,50)+"...":t}}},f=b,p=(a("5a0c"),a("2877")),h=Object(p["a"])(f,n,o,!1,null,"d2fbb25c",null),w=h.exports,u=a("2f62"),v=a("2375"),g={name:"AdminTweets",components:{Navbar:d["a"],AdminTweetsList:w,Spinner:v["a"]},computed:{...Object(u["b"])(["currentUser"])},data(){return{role:"",tweets:[],showTenTweets:[],pushIndex:0,loading:!1,isLoading:!0,fullWidth:0}},created(){this.fetchTweets()},mounted(){this.fullWidth=window.innerWidth,window.onresize=()=>{this.fullWidth=window.innerWidth};const t=this.$refs.infinite_list;t.addEventListener("scroll",()=>{const t=document.querySelector("#infinite-list");t.scrollTop+t.clientHeight+1>=t.scrollHeight&&this.loadMore()})},destroyed(){window.onresize=null},methods:{loadMore(){this.showTenTweets.length>=this.tweets.length||(this.loading=!0,setTimeout(()=>{for(let t=this.pushIndex;t<this.pushIndex+10;t++)this.showTenTweets.push(this.tweets[t]);this.pushIndex+=10,this.loading=!1},500))},async fetchTweets(){try{this.isLoading=!0;const{data:t}=await l["a"].tweets.get();if("error"===t.status)throw new Error(t.message);this.tweets=t,this.isLoading=!1;for(let e=this.pushIndex;e<10;e++)this.showTenTweets.push(this.tweets[e]);this.pushIndex+=10}catch(t){this.isLoading=!1,console.error(t.message),c["a"].fire({icon:"error",title:"無法取得推文清單資料，請稍後再試"})}},afterTweetDelete(t){this.tweets=this.tweets.filter(e=>e.id!==t)},logout(){this.role=this.currentUser.role,this.$store.commit("revokeAuthentication"),"user"===this.role?this.$router.push("/login"):this.$router.push("/admin/login")}}},m=g,x=(a("85c9"),Object(p["a"])(m,s,i,!1,null,"aeb3a17e",null));e["default"]=x.exports}}]);
//# sourceMappingURL=chunk-f1e1d3ec.d605dc6f.js.map